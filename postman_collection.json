{
  "info": {
    "name": "Jace Chat API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:8080", "type": "string" },
    { "key": "token", "value": "", "type": "string" },
    { "key": "refreshToken", "value": "", "type": "string" },
    { "key": "id", "value": "", "type": "string" },
    { "key": "chatId", "value": "", "type": "string" },
    { "key": "userId", "value": "", "type": "string" },
    { "key": "messageId", "value": "", "type": "string" },
    { "key": "fileId", "value": "", "type": "string" },
    { "key": "storedName", "value": "", "type": "string" }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{baseUrl}}/auth/register",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"alice\",\n  \"email\": \"alice@example.com\",\n  \"password\": \"secret\"\n}",
              "options": { "raw": { "language": "json" } }
            }
          }
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{baseUrl}}/auth/login",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"usernameOrEmail\": \"alice\",\n  \"password\": \"secret\"\n}",
              "options": { "raw": { "language": "json" } }
            }
          }
        },
        {
          "name": "Refresh",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{baseUrl}}/auth/refresh",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}",
              "options": { "raw": { "language": "json" } }
            }
          }
        }
      ]
    },

    {
      "name": "Chats",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/chats?page=0&size=20&sort=createdAt,desc"
          }
        },
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{baseUrl}}/chats",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"GROUP\",\n  \"title\": \"My Group\",\n  \"description\": \"About this group\"\n}",
              "options": { "raw": { "language": "json" } }
            }
          }
        },
        {
          "name": "Get by ID",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/chats/{{id}}"
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{baseUrl}}/chats/{{id}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"New Title\",\n  \"description\": \"New Desc\",\n  \"settings\": \"{\\\"theme\\\":\\\"dark\\\"}\"\n}",
              "options": { "raw": { "language": "json" } }
            }
          }
        },
        {
          "name": "Delete or Leave",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/chats/{{id}}"
          }
        }
      ]
    },

    {
      "name": "Messages",
      "item": [
        {
          "name": "List in Chat",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/chats/{{chatId}}/messages?page=0&size=50&sort=createdAt,desc"
          }
        },
        {
          "name": "Send",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{baseUrl}}/chats/{{chatId}}/messages",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Hello\",\n  \"type\": \"TEXT\"\n}",
              "options": { "raw": { "language": "json" } }
            }
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{baseUrl}}/messages/{{messageId}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Edited\"\n}",
              "options": { "raw": { "language": "json" } }
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/messages/{{messageId}}"
          }
        },
        {
          "name": "Mark Read",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/messages/{{messageId}}/read"
          }
        }
      ]
    },

    {
      "name": "Participants",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/chats/{{chatId}}/participants"
          }
        },
        {
          "name": "Add",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{baseUrl}}/chats/{{chatId}}/participants",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"role\": \"MEMBER\"\n}",
              "options": { "raw": { "language": "json" } }
            }
          }
        },
        {
          "name": "Update Role",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{baseUrl}}/chats/{{chatId}}/participants/{{userId}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"ADMIN\"\n}",
              "options": { "raw": { "language": "json" } }
            }
          }
        },
        {
          "name": "Remove",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/chats/{{chatId}}/participants/{{userId}}"
          }
        }
      ]
    },

    {
      "name": "Files",
      "item": [
        {
          "name": "Upload",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/files/upload",
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "file", "type": "file", "src": "" }
              ]
            }
          }
        },
        {
          "name": "Get by ID",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/files/{{fileId}}"
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": "{{baseUrl}}/files/{{fileId}}"
          }
        },
        {
          "name": "Raw (Public)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/files/raw/{{storedName}}"
          }
        }
      ]
    },

    {
      "name": "Health & Docs",
      "item": [
        {
          "name": "Health",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/actuator/health"
          }
        },
        {
          "name": "OpenAPI Docs JSON",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/v3/api-docs"
          }
        },
        {
          "name": "Swagger UI",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/swagger-ui.html"
          }
        }
      ]
    }
  ]
}
